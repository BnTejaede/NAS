describe("Version API", function () {
    var host = "http://localhost:8000/";
    
    it("can fetch versions for a scene and group", function (done) {
        sendRequest(host + "group/1/scene/1/version", "GET").then(function (data) {
            expect(data).toBeDefined();
            done();
        });
    });

    it("can fetch version for group, scene, and id", function (done) {
        var groupID = 1,
            sceneID = 1,
            versionID = 1,
            url = host;

            url += "group/" + groupID + "/";
            url += "scene/" + sceneID + "/";
            url += "version/" + versionID;

        sendRequest(url, "GET").then(function (data) {
            expect(data).toBeDefined();
            expect(data.id).toBe(versionID);
            expect(data.sceneId).toBe(sceneID);
            done();
        });
    });

    it("can fetch versions from root", function (done) {
        sendRequest(host + "version", "GET").then(function (data) {
            expect(data).toBeDefined();
            done();
        });
    });


    it("can create version with figures Tree", function (done) {
        // name:Version 1 Copy
        // figures:[{"name":"Folder 1","type":null,"geometry":null,"properties":null,"children":[{"name":"Folder 3","type":null,"geometry":null,"properties":null,"children":[],"position":0},{"name":"Folder 4","type":null,"geometry":null,"properties":null,"children":[],"position":1},{"name":"Folder 5","type":null,"geometry":null,"properties":null,"children":[],"position":2},{"name":"Folder 6","type":null,"geometry":null,"properties":null,"children":[],"position":3},{"name":"Folder 7","type":null,"geometry":null,"properties":null,"children":[],"position":4},{"name":"Folder 12","type":null,"geometry":null,"properties":null,"children":[],"position":5},{"name":"Folder 13","type":null,"geometry":null,"properties":null,"children":[],"position":6}],"position":0},{"name":"Folder 2","type":null,"geometry":null,"properties":null,"children":[{"name":"Folder 8","type":null,"geometry":null,"properties":null,"children":[],"position":0},{"name":"Folder 9","type":null,"geometry":null,"properties":null,"children":[],"position":1},{"name":"Folder 10","type":null,"geometry":null,"properties":null,"children":[],"position":2},{"name":"Rectangle","type":6,"geometry":{"type":"Polygon","coordinates":[[[35.67626953125,-6.846144945940779],[45.87158203125,-6.846144945940779],[45.87158203125,-13.716860434747488],[35.67626953125,-13.716860434747488],[35.67626953125,-6.846144945940779]]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"area","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":6,"name":"Rectangle","description":"Rectangle Figure"},"position":3},{"name":"Polyline","type":5,"geometry":{"type":"LineString","coordinates":[[25.70068359375,8.878130540406639],[26.35986328125,9.355420975223403],[26.40380859375,9.832057272285432],[26.27197265625,10.696888510118994],[25.30517578125,13.104737812602947],[25.30517578125,14.257574222325204],[25.61279296875,15.19260633092418],[26.22802734375,15.827776853942336],[29.69970703125,17.846602936388752],[29.87548828125,18.05563302752515],[29.12841796875,18.597943023290764],[26.35986328125,19.63597085779815],[25.43701171875,19.842785848127328]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":true,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"buffer","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":5,"name":"Polyline","description":"Polyline Figure","hasLabel":false},"position":4},{"name":"Folder 11","type":null,"geometry":null,"properties":null,"children":[],"position":5}],"position":1},{"name":"Folder 14","type":null,"geometry":null,"properties":null,"children":[{"name":"Folder 15","type":null,"geometry":null,"properties":null,"children":[],"position":0},{"name":"Folder 19","type":null,"geometry":null,"properties":null,"children":[{"name":"Rectangle","type":6,"geometry":{"type":"Polygon","coordinates":[[[19.50439453125,5.477774781099415],[28.29345703125,5.477774781099415],[28.29345703125,0.38847947526847154],[19.50439453125,0.38847947526847154],[19.50439453125,5.477774781099415]]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"area","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":6,"name":"Rectangle","description":"Rectangle Figure"},"position":0}],"position":1},{"name":"Folder 17","type":null,"geometry":null,"properties":null,"children":[],"position":2},{"name":"Folder 16","type":null,"geometry":null,"properties":null,"children":[{"name":"Placemark","type":3,"geometry":{"type":"Point","coordinates":[22.71240234375,14.853059889147625]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#FF0000","fontSize":40,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"buffer","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":3,"name":"Placemark","description":"Placemark Figure","placemark":{"id":"blank","name":"Blank","localizationKey":"shape.blank","unicode":"î™š","filename":"e65a-marker-shape.svg","symbol":"marker-shape","staticIconURL":"shape/blank.png"},"iconDimensions":{"width":23,"height":68}},"position":0}],"position":3},{"name":"Folder 18","type":null,"geometry":null,"properties":null,"children":[],"position":4},{"name":"Polyline","type":5,"geometry":{"type":"LineString","coordinates":[[29.12841796875,-16.727113262810377],[31.67724609375,-14.824162252288875],[31.85302734375,-14.398922866291908],[31.67724609375,-13.930222740572093],[31.06201171875,-13.546030696612744],[28.24951171875,-12.861498100415998],[25.96435546875,-12.003210247382958],[24.99755859375,-11.486909376917932],[23.76708984375,-10.408287391891928],[24.68994140625,-10.019047855403093],[30.18310546875,-8.935427229756108],[31.06201171875,-8.457587822900152],[31.06201171875,-7.935632944620182],[30.31494140625,-7.456590266108202],[28.42529296875,-6.933400883853103],[25.87646484375,-6.58428219039104],[21.13037109375,-6.322281219348175]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":true,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"buffer","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":5,"name":"Polyline","description":"Polyline Figure","hasLabel":false},"position":5},{"name":"Folder 20","type":null,"geometry":null,"properties":null,"children":[],"position":6}],"position":2},{"name":"Circle","type":1,"geometry":{"type":"MultiPoint","coordinates":[[31.10595703125,13.745900615980855],[33.61083984375,11.300818638547241]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"buffer","preserveAspectRatio":false,"radius":384495.94775118376,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":1,"name":"Circle","description":"Circle Figure","bearing":134.7191946973337},"position":3},{"name":"Rectangle","type":6,"geometry":{"type":"Polygon","coordinates":[[[32.60009765625,8.35674194597064],[39.58740234375,8.35674194597064],[39.58740234375,4.470852535716536],[32.60009765625,4.470852535716536],[32.60009765625,8.35674194597064]]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"area","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":6,"name":"Rectangle","description":"Rectangle Figure"},"position":4},{"name":"Polygon Name Update","type":4,"geometry":{"type":"Polygon","coordinates":[[[44.553208007812486,-1.7206397524839359],[54.704575195312486,5.958760456360151],[50.046372070312486,16.713650962709266],[34.401840820312486,8.443683827065465],[34.182114257812486,0.8279008763109966]]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"area","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":4,"name":"Polygon Name Update","description":"Polygon Figure"},"position":5},{"name":"Circle","type":1,"geometry":{"type":"MultiPoint","coordinates":[[20.07568359375,13.575091904724514],[22.49267578125,11.214619126807566]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"buffer","preserveAspectRatio":false,"radius":371191.0376258126,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":1,"name":"Circle","description":"Circle Figure","bearing":134.7320107936905},"position":6},{"name":"Circle","type":1,"geometry":{"type":"MultiPoint","coordinates":[[37.56591796875,13.788583400478666],[39.19189453125,12.032449634021813]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"buffer","preserveAspectRatio":false,"radius":263031.58454156085,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":1,"name":"Circle","description":"Circle Figure","bearing":137.7497344077692},"position":7},{"name":"Polygon","type":4,"geometry":{"type":"Polygon","coordinates":[[[28.38134765625,-23.045762586981038],[39.85107421875,-19.690584931729845],[25.21728515625,-18.02720826796167],[23.54736328125,-11.400766056414088],[18.53759765625,-14.569117266246018],[18.01025390625,-17.901799655806375]]]},"properties":{"isResizable":true,"dataURL":"","displayLabelBorder":true,"displayDistanceLabels":false,"displayDistanceTotal":false,"displayMeasurementInLabel":false,"displayNameInLabel":false,"fillColor":"#000000","fillOpacity":0.5,"fontColor":"#000000","fontSize":14,"imageOpacity":1,"isFreeHand":false,"isNewObject":false,"labelStrokeColor":"#000000","labelStrokeOpacity":1,"labelStrokeWidth":1,"labelType":"area","preserveAspectRatio":false,"radius":0,"isCenteredOnOrigin":false,"strokeColor":"#000000","strokeOpacity":1,"strokeWidth":2,"units":"metric","type":4,"name":"Polygon","description":"Polygon Figure"},"position":8},{"name":"New Folder","type":null,"geometry":null,"properties":null,"children":[],"position":9},{"name":"New Folder","type":null,"geometry":null,"properties":null,"children":[{"name":"New Folder","type":null,"geometry":null,"properties":null,"children":[],"position":0}],"position":10}]
    });

});